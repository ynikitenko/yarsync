---
layout: default
---
<body>
<div class="document">
<div class="section" id="usage-tips">
<h1>Usage tips</h1>
<p>Since <tt class="docutils literal">yarsync</tt> allows to use a command interface similar to <tt class="docutils literal">git</tt>,
one can synchronize several repositories simultaneously using
<a class="reference external" href="https://myrepos.branchable.com/">myrepos</a>.</p>
</div>
<div class="section" id="development">
<h1>Development</h1>
<p>Community contributions are very important for free software projects.</p>
<p>If you find this tool useful and want to fix an existing or unknown issue,
clone the repository and install Python packages for tests:</p>
<pre class="code console literal-block">
<span class="generic output">pip install -r requirements.txt</span>
</pre>
<!-- To propose a feature, please open a new issue first for a design discussion. -->
<p><tt class="docutils literal">yarsync</tt> was tested on ext4 and SimFS on Arch Linux and CentOS.
Tests on other systems would be useful.</p>
</div>
<div class="section" id="hard-links">
<h1>Hard links</h1>
<p>The file system must support hard links if you plan to use <em>commits</em>.
Multiple hard links are supported by POSIX-compliant and partially POSIX-compliant operating systems,
such as Linux, Android, macOS, and also Windows NT4 and later Windows NT operating systems
[<a class="reference external" href="https://en.wikipedia.org/wiki/Hard_link">Wikipedia</a>].</p>
<p>Notable file systems to <strong>support hard links</strong> include [<a class="reference external" href="https://en.wikipedia.org/wiki/Hard_link">hard links</a> and <a class="reference external" href="https://en.wikipedia.org/wiki/Comparison_of_file_systems#File_capabilities">comparison of file systems</a> from Wikipedia]:</p>
<ul class="simple">
<li>EncFS (an Encrypted Filesystem using FUSE). Note that it doesn't support hard links <a class="reference external" href="https://github.com/vgough/encfs/blob/master/encfs/encfs.pod">when External IV Chaining is enabled</a> (this is enabled by default in paranoia mode, and disabled by default in standard mode).</li>
<li>ext2-ext4. Standard on Linux. Ext4 has a limit of <a class="reference external" href="https://en.wikipedia.org/wiki/Hard_link#Limitations_of_hard_links">65000 hard links</a> on a file.</li>
<li>HFS+. Standard on Mac OS.</li>
<li>NTFS. The only Windows file system to support hard links. It has a limit of <a class="reference external" href="https://en.wikipedia.org/wiki/NTFS">1024 hard links</a> on a file.</li>
<li>SquashFS, a compressed read-only file system for Linux.</li>
</ul>
<p>Hard links are <strong>not supported</strong> on:</p>
<ul class="simple">
<li>FAT, exFAT. These are used on many flash drives.</li>
<li>Joliet (&quot;CDFS&quot;), ISO 9660. File systems on CDs.</li>
</ul>
<p>The majority of modern file systems support hard links.
A full list of <a class="reference external" href="https://en.wikipedia.org/wiki/Comparison_of_file_systems#File_capabilities">file system capabilities</a> can be found on Wikipedia.</p>
<p>One can copy data to file systems without hard links, but this will reduce the functionality of <tt class="docutils literal">yarsync</tt>,
and one should take care not to consume too much disk space if accidentally copying files instead of hard linking.</p>
</div>
<div class="section" id="rsync-limitations">
<h1>rsync limitations</h1>
<ul class="simple">
<li><a class="reference external" href="https://www.resilio.com/blog/rsync-alternative">Millions of files</a> will be synced very slowly.</li>
<li><tt class="docutils literal">rsync</tt> freezes when encountering <strong>too many hard links</strong>. Users report problems for repositories of <a class="reference external" href="https://serverfault.com/questions/363670/rsync-avzhp-follows-hardlinks-instead-of-copying-them-as-hardlinks#comment1252592_363780">200 G</a> or <a class="reference external" href="https://bugzilla.samba.org/show_bug.cgi?id=10678">90 GB</a>, with many hard links. For the author's repository with 30 thousand files (160 thousand with commits) and 3 Gb of data <tt class="docutils literal">rsync</tt> works fine. If you have a large repository and want to copy it with all hard links, it is recommended to create a separate partition (e.g. LVM) and copy the filesystem as a whole. You can also remove some of older backups.</li>
<li><tt class="docutils literal">rsync</tt> may create separate files instead of hard linking them. It can be fixed quickly using the <a class="reference external" href="https://jak-linux.org/projects/hardlink/">hardlink</a> executable.</li>
</ul>
</div>
<div class="section" id="alternatives">
<h1>Alternatives</h1>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Rsync#rsync_applications">Free software that uses rsync</a> includes:</p>
<ul class="simple">
<li><a class="reference external" href="https://backintime.readthedocs.io/">Back In Time</a>. See previous snapshots using a GUI.</li>
<li>Grsync, graphical interface for rsync.</li>
<li><a class="reference external" href="http://luckybackup.sourceforge.net/manual.html">LuckyBackup</a>. It is written in C++ and is mostly used from a graphical shell.</li>
<li><a class="reference external" href="https://rsnapshot.org/">rsnapshot</a>, a filesystem snapshot utility. <tt class="docutils literal">rsnapshot</tt> makes it easy to make periodic snapshots of local machines, and remote machines over ssh. Files can be restored by the users who own them, without the root user getting involved.</li>
</ul>
<p>Other syncronization / backup / archiving software:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/systemd/casync">casync</a> is a combination of the rsync algorithm and content-addressable storage. It is an efficient way to deliver and update directory trees and large images over the Internet in an HTTP and CDN friendly way. Other systems that use <a class="reference external" href="https://github.com/systemd/casync#casync--content-addressable-data-synchronizer">similar algorithms</a> include <a class="reference external" href="https://bup.github.io/">bup</a>.</li>
<li><a class="reference external" href="http://www.nongnu.org/duplicity/">Duplicity</a> backs directories by producing encrypted tar-format volumes and uploading them to a remote or local file server. <tt class="docutils literal">duplicity</tt> uses <tt class="docutils literal">librsync</tt> and is space efficient. It supports many cloud providers. In 2021 <tt class="docutils literal">duplicity</tt> supports deleted files, full unix permissions, directories, and symbolic links, fifos, and device files, but not hard links. It can be run on Linux, MacOS and Windows (<a class="reference external" href="https://en.wikipedia.org/wiki/Duplicity_(software)">under Cygwin</a>).</li>
<li><a class="reference external" href="https://git-annex.branchable.com/">Git-annex</a> manages distributed copies of files using git. This is a very powerful tool written in Haskell. It allows for each file to track the number of backups that contain it and their names, and it allows to plan downloading of a file to the local storage. This is its author's <a class="reference external" href="https://git-annex.branchable.com/testimonials/">use case</a>: &quot;I have a ton of drives. I have a lot of servers. I live in a cabin on dialup and often have 1 hour on broadband in a week to get everything I need&quot;. I tried to learn <tt class="docutils literal"><span class="pre">git-annex</span></tt>, it was <a class="reference external" href="http://git-annex.branchable.com/tips/centralized_git_repository_tutorial/on_your_own_server/#comment-29cc31b898ba34a1f59a96ba7b001e08">uneasy</a> , and finally I found that it <a class="reference external" href="https://git-annex.branchable.com/todo/does_not_preserve_timestamps/">doesn't preserve timestamps</a> (because <tt class="docutils literal">git</tt> doesn't) and <a class="reference external" href="https://git-annex.branchable.com/bugs/assistant_doesn__39__t_sync_file_permissions/">permissions</a>. If that suits you, there is also a list of specialized <a class="reference external" href="https://git-annex.branchable.com/related_software/">related software</a>. <tt class="docutils literal"><span class="pre">git-annex</span></tt> allows to use many cloud services as <a class="reference external" href="https://git-annex.branchable.com/special_remotes/">special remotes</a>, including all <a class="reference external" href="https://git-annex.branchable.com/special_remotes/rclone/">rclone remotes</a>.</li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Rclone">Rclone</a> focuses on cloud and other high latency storage. It supports more than 50 different providers. As of 2021, it doesn't preserve permissions and attributes.</li>
</ul>
<p>Continuous synchronization software:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/tillberg/gut">gut-sync</a> offers a real-time bi-directional folder synchronization.</li>
<li><a class="reference external" href="https://syncthing.net/">Syncthing</a>. A very powerful and developed tool, works on Linux, MacOS, Windows and Android. Mostly uses a GUI (admin panel is managed through a Web interface), but also has a <a class="reference external" href="https://docs.syncthing.net/users/syncthing.html">command line interface</a>.</li>
<li><a class="reference external" href="https://www.cis.upenn.edu/~bcpierce/unison/">Unison</a> is a file-synchronization tool for OSX, Unix, and Windows. It allows two replicas of a collection of files and directories to be stored on different hosts (or different disks on the same host), modified separately, and then brought up to date by propagating the changes in each replica to the other (pretty much like other syncronization tools work).</li>
<li>Dropbox, Google Drive, Yandex Disk and many other closed-source tools fall into this cathegory.</li>
</ul>
<p>ArchWiki includes several useful <a class="reference external" href="https://wiki.archlinux.org/index.php/Rsync">scripts for rsync</a> and a list of its
<a class="reference external" href="https://wiki.archlinux.org/index.php/Rsync#Front-ends">graphical front-ends</a>.
It also has a <a class="reference external" href="https://wiki.archlinux.org/index.php/List_of_applications/Internet#Cloud_synchronization_clients">list of cloud synchronization clients</a>
and a <a class="reference external" href="https://wiki.archlinux.org/index.php/Synchronization_and_backup_programs">list of synchronization and backup programs</a>.
Wikipedia offers a <a class="reference external" href="https://en.wikipedia.org/wiki/Comparison_of_file_synchronization_software">comparison of file synchronization software</a> and a <a class="reference external" href="https://en.wikipedia.org/wiki/Comparison_of_backup_software">comparison of backup software</a>.
Git-annex has a list of <a class="reference external" href="https://git-annex.branchable.com/not/">git-related</a> tools.</p>
</div>
</div>
</body>
